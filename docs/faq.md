# xvpn よくある質問（FAQ）

## 目次

1. [一般的な質問](#一般的な質問)
2. [技術的な質問](#技術的な質問)
3. [セキュリティについて](#セキュリティについて)
4. [トラブルシューティング](#トラブルシューティング)
5. [法的・倫理的な質問](#法的倫理的な質問)

## 一般的な質問

### Q1: xvpnとは何ですか？

**A**: xvpnは、ブラウザで動作するHTTP/HTTPSプロキシサービスです。Service Workerを使用してブラウザ内のリクエストをインターセプトし、Cloudflare Workers経由でプロキシします。教育目的で作成されたオープンソースプロジェクトです。

### Q2: xvpnは本当のVPNですか？

**A**: いいえ。xvpnは**HTTP/HTTPSプロキシ**であり、真のVPNではありません。以下の違いがあります：

- **VPN**: OSレベルで全てのネットワークトラフィック（TCP/UDP）をトンネリング
- **xvpn**: ブラウザのHTTP/HTTPSリクエストのみをプロキシ

詳細は [limitations.md](./limitations.md) を参照してください。

### Q3: xvpnは無料ですか？

**A**: xvpn自体はオープンソース（MITライセンス）で無料ですが、以下のコストがかかる可能性があります：

- **Cloudflare Workers**: 無料枠あり（10万リクエスト/日）、超過後は従量課金
- **Auth0**: 無料枠あり（7,000アクティブユーザー/月）、超過後は有料
- **ホスティング**: Cloudflare Pagesは無料

個人使用であれば、ほぼ無料で運用可能です。

### Q4: xvpnは誰でも使えますか？

**A**: 技術的には誰でも使えますが、以下が必要です：

- Cloudflareアカウント
- Auth0アカウント
- Node.js、Git等の開発環境
- 基本的なプログラミング知識（セットアップ時）

また、各国の法規制を遵守する必要があります。

### Q5: xvpnで何ができますか？

**A**: 以下が可能です：

- ✅ HTTP/HTTPSリクエストのプロキシ
- ✅ APIへのアクセス（CORS制限がある場合も部分的に可能）
- ✅ 簡単なWebブラウジング

以下は**できません**：

- ❌ WebSocketのプロキシ
- ❌ 動画ストリーミング（パフォーマンス制限）
- ❌ ブラウザ外のアプリケーション
- ❌ OSレベルのVPN機能

### Q6: xvpnは商用利用できますか？

**A**: MITライセンスなので技術的には可能ですが、以下に注意してください：

- プロキシサービスは法規制がある場合があります
- Cloudflareの利用規約を確認してください
- セキュリティ、スケーラビリティ、法的リスクを慎重に評価してください
- 商用利用の場合は弁護士に相談することを推奨します

## 技術的な質問

### Q7: どのブラウザがサポートされていますか？

**A**: Service Workerをサポートする全てのモダンブラウザ：

- ✅ Google Chrome 40+
- ✅ Firefox 44+
- ✅ Safari 11.1+
- ✅ Edge 17+
- ✅ Opera 27+

**注意**: Safari のプライベートブラウジングではService Workerが無効化されます。

### Q8: WebSocketはサポートされていますか？

**A**: 現在はサポートされていません。

Service WorkerはWebSocketの完全なインターセプトができないため、現在の実装では対応していません。将来、Cloudflare Workers Durable Objectsを使用した実装を検討していますが、複雑でコストも高くなります。

### Q9: 動画やストリーミングは見れますか？

**A**: 技術的には可能ですが、以下の制限があります：

- Cloudflare Workersの50ms CPU時間制限
- レート制限（100リクエスト/分）
- パフォーマンスのオーバーヘッド

小さな動画は可能ですが、YouTube等の長時間動画は推奨しません。

### Q10: HTTPSページからHTTPサイトにアクセスできますか？

**A**: いいえ。ブラウザの混合コンテンツ（Mixed Content）ポリシーによりブロックされます。

xvpnアプリ自体がHTTPSの場合、HTTPサイトへのリクエストはブラウザがブロックします。これはブラウザのセキュリティ機能であり、xvpnでは回避できません。

### Q11: CORSエラーは回避できますか？

**A**: 部分的に可能ですが、完全には回避できません。

Worker側で`Access-Control-Allow-Origin`ヘッダーを追加することで、一部のCORSエラーは回避できますが：

- ブラウザのセキュリティポリシーは残ります
- プリフライトリクエスト（OPTIONS）は複雑です
- 元のサイトのセキュリティポリシーを迂回するのは倫理的に問題です

**推奨**: CORS制限を尊重し、許可されたAPIのみ使用してください。

### Q12: 複数のユーザーで同時に使えますか？

**A**: はい。Cloudflare Workersは自動的にスケールします。

ただし、以下の制限があります：

- Cloudflareの無料枠（10万リクエスト/日）
- Auth0の無料枠（7,000アクティブユーザー/月）
- KV Storageの書き込み制限（1,000 write/日）

大規模な使用の場合は有料プランが必要です。

### Q13: カスタムドメインは使えますか？

**A**: はい。以下の両方でカスタムドメインを設定できます：

**Worker**:
`wrangler.toml`に`routes`を追加：
```toml
routes = [
  { pattern = "api.your-domain.com/*", zone_name = "your-domain.com" }
]
```

**Frontend**:
Cloudflare Pagesダッシュボードで「Custom domains」から追加。

### Q14: プロキシを複数のタブで同時に使えますか？

**A**: いいえ、現在の実装では各タブで個別にプロキシを有効化する必要があります。

Service Workerはスコープ（登録されたオリジン）内でのみ動作し、タブ間でプロキシ状態は共有されません。

### Q15: ローカルネットワークにアクセスできますか？

**A**: いいえ、セキュリティ上の理由でブロックされます。

SSRF（Server-Side Request Forgery）攻撃を防ぐため、以下はブロックされます：

- `localhost`, `127.0.0.1`
- プライベートIPアドレス（`10.x.x.x`, `192.168.x.x`, `172.16.x.x`）
- メタデータエンドポイント（`169.254.169.254`）

## セキュリティについて

### Q16: xvpnは安全ですか？

**A**: 以下のセキュリティ対策が実装されています：

- Auth0による認証
- JWT署名検証
- レート制限
- ドメイン許可リスト
- 監査ログ
- HTTPS通信

ただし、以下に注意してください：

- Cloudflare Workerでトラフィックが復号化される（エンドツーエンド暗号化ではない）
- プライバシー保護には限界がある
- 真のVPNほどのセキュリティはない

詳細は [security.md](./security.md) を参照してください。

### Q17: 運営者は私のトラフィックを見れますか？

**A**: 理論的には可能です。

トラフィックはCloudflare Workerを経由するため、Worker運営者は理論的にトラフィックを記録できます。現在の実装では：

- **記録しているもの**: プロキシリクエストのURL、タイムスタンプ、ユーザーID
- **記録していないもの**: リクエスト/レスポンスの内容、ヘッダー（一部を除く）

真のプライバシーが必要な場合は、確立されたVPNサービス（WireGuard、OpenVPN等）を使用してください。

### Q18: Auth0のアカウント情報は安全ですか？

**A**: はい。Auth0は業界標準のセキュリティを提供しています。

- パスワードはbcryptでハッシュ化
- GitHubログインはOAuth 2.0
- JWTは署名付き（改ざん検出）
- 多要素認証（MFA）もサポート（設定次第）

### Q19: レート制限はなぜ必要ですか？

**A**: 以下の理由でレート制限を実装しています：

1. **DDoS攻撃防止**: 大量リクエストをブロック
2. **悪用防止**: 1ユーザーがリソースを独占しない
3. **コスト管理**: Cloudflareの無料枠を守る
4. **公平性**: 全ユーザーが公平にリソースを使用

### Q20: オープンプロキシになりませんか？

**A**: いいえ、以下の対策で防いでいます：

- 全てのリクエストにJWT認証を要求
- ドメイン許可リスト
- レート制限
- 監査ログ

詳細は [security.md](./security.md) のオープンプロキシ対策を参照してください。

## トラブルシューティング

### Q21: 「Service Worker registration failed」エラーが出ます

**A**: 以下を確認してください：

1. **HTTPS**: Service WorkerはHTTPS必須（localhost除く）
2. **ファイルパス**: `service-worker.js`が`public/`にあるか確認
3. **ブラウザサポート**: モダンブラウザを使用しているか確認
4. **キャッシュ**: ブラウザのキャッシュをクリア

詳細は [troubleshooting.md](./troubleshooting.md) を参照してください。

### Q22: ログインできません

**A**: 以下を確認してください：

1. **Auth0設定**: Allowed Callback URLsが正しいか確認
2. **環境変数**: `VITE_AUTH0_DOMAIN`, `VITE_AUTH0_CLIENT_ID`が正しいか確認
3. **ネットワーク**: Auth0へのアクセスがブロックされていないか確認
4. **ブラウザ**: Cookieが有効か確認

### Q23: プロキシが動作しません

**A**: 以下を確認してください：

1. **認証**: ログインしているか確認
2. **プロキシ有効化**: 「プロキシを有効化」ボタンを押したか確認
3. **Worker URL**: 環境変数`VITE_WORKER_URL`が正しいか確認
4. **ドメイン許可**: プロキシ先がALLOWED_PROXY_DOMAINSに含まれているか確認
5. **レート制限**: レート制限に達していないか確認

### Q24: 「429 Too Many Requests」エラーが出ます

**A**: レート制限に達しています。

- **デフォルト**: 100リクエスト/分
- **対処**: `X-RateLimit-Reset`のタイムスタンプまで待機
- **調整**: `.dev.vars`の`RATE_LIMIT_MAX_REQUESTS`を増やす（開発環境のみ）

### Q25: Workerのデプロイに失敗します

**A**: 以下を確認してください：

1. **wrangler認証**: `wrangler login`または`CLOUDFLARE_API_TOKEN`設定
2. **wrangler.toml**: 設定が正しいか確認
3. **KV Namespace**: KV Namespace IDが正しいか確認
4. **権限**: Cloudflare APIトークンに適切な権限があるか確認

## 法的・倫理的な質問

### Q26: xvpnは合法ですか？

**A**: 国や使用目的によります。

- **教育・研究目的**: 多くの国で合法
- **プライバシー保護**: 国によって規制が異なる
- **違法コンテンツへのアクセス**: 違法

**推奨**:
- 各国の法律を確認してください
- 弁護士に相談してください（商用の場合）
- 責任を持って使用してください

### Q27: Cloudflareの利用規約に違反しませんか？

**A**: Cloudflareの利用規約を確認してください。

プロキシサービスがWorkers利用規約に抵触する可能性があります。以下を推奨します：

- [Cloudflare Terms of Service](https://www.cloudflare.com/terms/)を熟読
- 疑問がある場合はCloudflareサポートに問い合わせ
- 教育・個人使用に限定

### Q28: どのような使用が推奨されますか？

**A**: 以下の使用を推奨します：

✅ **推奨される使用**:
- VPN/プロキシの仕組みを学ぶ
- Web開発のテスト
- 特定のAPIへのアクセス（開発時）
- コンセプト実証

❌ **推奨されない使用**:
- 違法コンテンツへのアクセス
- 著作権侵害
- 大規模な商用サービス
- 真のプライバシー保護が必要な用途
- ストリーミングサービスの地域制限回避

### Q29: プライバシーポリシーは必要ですか？

**A**: 商用または公開サービスとして運用する場合は**必須**です。

以下を含めてください：

- 収集するデータ（ログ、ユーザー情報等）
- データの使用目的
- データの保持期間
- データの共有先（あれば）
- ユーザーの権利（GDPR、CCPA等）

### Q30: 他のユーザーの悪用を防ぐには？

**A**: 以下の対策を実装してください：

1. **利用規約**: 明確な利用規約を作成
2. **監査ログ**: 全てのアクションを記録
3. **レート制限**: 悪用を検出・防止
4. **ドメイン制限**: 許可されたドメインのみ
5. **ユーザー停止**: 違反ユーザーを停止する機能
6. **監視**: 異常なパターンを監視

## その他

### Q31: xvpnは開発中ですか？

**A**: はい。これは実験的なプロジェクトです。

- 新機能が追加される可能性があります
- 破壊的変更がある可能性があります
- コミュニティの貢献を歓迎します

### Q32: 貢献するにはどうすればいいですか？

**A**: 以下の方法で貢献できます：

1. **GitHub**: プルリクエストを送信
2. **Issue**: バグ報告、機能提案
3. **ドキュメント**: ドキュメントの改善
4. **テスト**: 様々な環境でテスト

貢献ガイドライン（CONTRIBUTING.md）を参照してください。

### Q33: サポートはありますか？

**A**: コミュニティベースのサポートがあります：

- **GitHub Issues**: バグ報告、質問
- **ドキュメント**: 包括的なドキュメント
- **コミュニティ**: 他のユーザーとの情報共有

商用サポートは現在提供していません。

### Q34: 他のプロジェクトとの違いは？

**A**: xvpnの特徴：

- **ブラウザネイティブ**: 拡張機能不要
- **エッジコンピューティング**: Cloudflare Workersで高速
- **モダンスタック**: React、Vite、Auth0
- **教育目的**: 学習用に設計されたクリーンなコード
- **オープンソース**: MITライセンス

### Q35: ロードマップはありますか？

**A**: 将来の計画（未確定）：

- WebSocketサポート（Durable Objects使用）
- キャッシング機能
- 管理ダッシュボード
- ユーザー管理機能
- ブラウザ拡張版
- パフォーマンス最適化

GitHubのIssuesで議論しています。

---

## さらに質問がある場合

- [トラブルシューティング](./troubleshooting.md)
- [ドキュメント一覧](../README.md#ドキュメント)
- [GitHub Issues](https://github.com/your-org/xvpn/issues)

質問は大歓迎です！
